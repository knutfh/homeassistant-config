
### Nattmodus
nattmodus:
  sequence:
    - service: light.turn_off
      data:
        entity_id: light.stue, light.taklys_soverom, light.taklys_gang
        transition: 10
    - service: light.turn_on
      data:
        entity_id: light.hund_3, light.trapp_4, light.inn
        brightness: 10
        
### Morgenmodus
morgenmodus:
  sequence:
    - service: light.turn_on
      data:
        entity_id: light.taklys_gang, light.horus_3, light.trapp_1
        brightness: 20
        
kveldsmodus:
  sequence:
    - service: light.turn_on
      data:
        entity_id: light.stue
        brightness_pct: 50
        transition: 10

stueopploop:
  alias: Stuelys opp 10% loop
  sequence:
    - service: light.turn_on
      data_template:
        entity_id: light.stue
        transition: '1'
        brightness: >
          {% set n = states.light.stue.attributes.brightness + 25 %}
          {% if n > 255 %}
            255
          {% else %}
            {{ n }}
          {% endif %}
    - service: script.turn_on
      entity_id: script.stueopploopdelay

stueopploopdelay:
  alias: Stuelys opp loop
  sequence:
    - delay:
        milliseconds: 400
    - service: script.turn_on
      entity_id: script.stueopploop
 
stuenedloop:
  alias: Stuelys ned 10% loop
  sequence:
    - service: light.turn_on
      data_template:
        entity_id: light.stue
        transition: '1'
        brightness: >
         {% set n = states.light.stue.attributes.brightness - 50 %}
         {% if n < 0 %}
           0
         {% else %}
           {{ n }}
         {% endif %}
    - service: script.turn_on
      entity_id: script.stuenedloopdelay

stuenedloopdelay:
  alias: Stuelys ned loop
  sequence:
    - delay:
        milliseconds: 400
    - service: script.turn_on
      entity_id: script.stuenedloop
      
      
      
